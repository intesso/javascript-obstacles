<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <title>javascript obstacles</title>
  <style type="text/css">
    body {
  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
  color: #222;
  font-size: 100%;
}

.slide {
  position: absolute;
  top: 0; bottom: 0;
  left: 0; right: 0;
  background-color: #f7f7f7;
}

.slide-content {
  width: 800px;
  height: 600px;
  overflow: hidden;
  margin: 80px auto 0 auto;
  padding: 30px;

  font-weight: 200;
  font-size: 200%;
  line-height: 1.375;
}

.controls {
  position: absolute;
  bottom: 20px;
  left: 20px;
}

.arrow {
  width: 0; height: 0;
  border: 30px solid #333;
  float: left;
  margin-right: 30px;

  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.prev {
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;

  border-left-width: 0;
  border-right-width: 50px;
}

.next {
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-right-color: transparent;

  border-left-width: 50px;
  border-right-width: 0;
}

.prev:hover {
  border-right-color: #888;
  cursor: pointer;
}

.next:hover {
  border-left-color: #888;
  cursor: pointer;
}

h1 {
  font-size: 300%;
  line-height: 1.2;
  text-align: center;
  margin: 170px 0 0;
}

h2 {
  font-size: 100%;
  line-height: 1.2;
  margin: 5px 0;
  text-align: center;
  font-weight: 200;
}

h3 {
  font-size: 140%;
  line-height: 1.2;
  border-bottom: 1px solid #aaa;
  margin: 0;
  padding-bottom: 15px;
}

ul {
  padding: 20px 0 0 60px;
  font-weight: 200;
  line-height: 1.375;
}

.author h1 {
  font-size: 170%;
  font-weight: 200;
  text-align: center;
  margin-bottom: 30px;
}

.author h3 {
  font-weight: 100;
  text-align: center;
  font-size: 95%;
  border: none;
}

a {
  text-decoration: none;
  color: #44a4dd;
}

a:hover {
  color: #66b5ff;
}

pre {
  font-size: 60%;
  line-height: 1.3;
}

.progress {
  position: fixed;
  top: 0; left: 0; right: 0;
  height: 3px;
}

.progress-bar {
  width: 0%;
  height: 3px;
  background-color: #b4b4b4;

  -webkit-transition: width 0.05s ease-out;
  -moz-transition: width 0.05s ease-out;
  -o-transition: width 0.05s ease-out;
  transition: width 0.05s ease-out;
}

.hidden {
  display: none;
}

@media (max-width: 850px) {

  body {
    font-size: 70%;
  }

  .slide-content {
    width: auto;
  }

  img {
    width: 100%;
  }

  h1 {
    margin-top: 120px;
  }

  .prev, .prev:hover {
    border-right-color: rgba(135, 135, 135, 0.5);
  }

  .next, .next:hover {
    border-left-color: rgba(135, 135, 135, 0.5);
  }
}

@media (max-width: 480px) {
  body {
    font-size: 50%;
    overflow: hidden;
  }

  .slide-content {
    padding: 10px;
    margin-top: 10px;
    height: 340px;
  }

  h1 {
    margin-top: 50px;
  }

  ul {
    padding-left: 25px;
  }
}

@media print {
  * {
    -webkit-print-color-adjust: exact;
  }

  @page {
    size: letter;
  }

  .hidden {
    display: inline;
  }

  html {
    width: 100%;
    height: 100%;
    overflow: visible;
  }

  body {
    margin: 0 auto !important;
    border: 0;
    padding: 0;
    float: none !important;
    overflow: visible;
    background: none !important;
    font-size: 52%;
  }

  .progress, .controls {
    display: none;
  }

  .slide {
    position: static;
  }

  .slide-content {
    border: 1px solid #222;
    margin-top: 0;
    margin-bottom: 40px;
    height: 3.5in;
    overflow: visible;
  }

  .slide:nth-child(even) {
    /* 2 slides per page */
    page-break-before: always;
  }
}

/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/

.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8;
}

.hljs-comment,
.hljs-quote {
  color: #998;
  font-style: italic;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #333;
  font-weight: bold;
}

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: #008080;
}

.hljs-string,
.hljs-doctag {
  color: #d14;
}

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #900;
  font-weight: bold;
}

.hljs-subst {
  font-weight: normal;
}

.hljs-type,
.hljs-class .hljs-title {
  color: #458;
  font-weight: bold;
}

.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #000080;
  font-weight: normal;
}

.hljs-regexp,
.hljs-link {
  color: #009926;
}

.hljs-symbol,
.hljs-bullet {
  color: #990073;
}

.hljs-built_in,
.hljs-builtin-name {
  color: #0086b3;
}

.hljs-meta {
  color: #999;
  font-weight: bold;
}

.hljs-deletion {
  background: #fdd;
}

.hljs-addition {
  background: #dfd;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}

blockquote {
  padding-left: 20px;
  margin-left: 0;
  margin-right: 0;
  background: #ddd;
  border-left: 5px solid #ccc;
  border-radius: 0 3px 3px 0;
}

blockquote p {
  padding: .5em;
  color: #272822;
}

p {
  display: block;
  -webkit-margin-before: 0.9em;
  -webkit-margin-after: 0.9em;
  -webkit-margin-start: 0px;
  -webkit-margin-end: 0px;
}

pre {
  font-size: 90%;
  line-height: 1.2;
}

ul {
  padding: 0 0 0 40px;
  font-weight: 200;
  line-height: 1.6;
}

.progress {
  z-index: 1000;
}

.progress-bar {
  height: 5px;
}

img {
  width: 100%
}

body,
.slide {
  background-color: #eee;
}

.slide-content {
  margin-top: 20px;
  width: auto;
  max-width: 1000px;
  height: auto;
  overflow: auto;
  z-index: 1;
}

.controls {
  position: fixed;
  bottom: 20px;
  left: 20px;
}

.arrow {
  width: 0;
  height: 0;
  border: 30px solid #ddd;
  float: left;
  margin-right: 30px;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.prev {
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-left-color: transparent;
  border-left-width: 0;
  border-right-width: 50px;
}

.next {
  border-top-color: transparent;
  border-bottom-color: transparent;
  border-right-color: transparent;
  border-left-width: 50px;
  border-right-width: 0;
}
  </style>
    <script async src="http://localhost:35729/livereload.js"></script>
</head>
<body>
    <div class="progress">
    <div class="progress-bar"></div>
  </div>

  <div class="slide" id="slide-1">
    <section class="slide-content"><h3 id="js-obstacles">js obstacles</h3>
<blockquote>
<p>Callback Functions</p>
</blockquote>
<pre><code class="lang-js"><span class="hljs-comment">// dom stuff</span>
<span class="hljs-keyword">var</span> body = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'body'</span>);

<span class="hljs-comment">// event listener</span>
body.addEventListener(<span class="hljs-string">'click'</span>, myCallback);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myCallback</span>(<span class="hljs-params">e</span>) </span>{
  confirm(<span class="hljs-string">"DONT CLICK!"</span>);
}

<span class="hljs-comment">// same in green, but with nested function</span>
body.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myCallback</span>(<span class="hljs-params">e</span>) </span>{
  confirm(<span class="hljs-string">"DONT CLICK!"</span>);
});</code></pre>
</section>
  </div>
  <div class="slide hidden" id="slide-2">
    <section class="slide-content"><h3 id="js-obstacles">js obstacles</h3>
<blockquote>
<p><a href="http://callbackhell.com/">Callback Hell</a> is when your code looks like this</p>
</blockquote>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">i, callback</span>) </span>{
  i = i+<span class="hljs-number">1</span>;
  setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'count'</span>, i);
    callback(i);
  }, <span class="hljs-number">100</span>);
}

add(<span class="hljs-number">1</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i</span>)</span>{
  add(i, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i</span>) </span>{
    add(i, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i</span>)</span>{
      add(i, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i</span>)</span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'done'</span>, i);
      });
    });
  });
});</code></pre>
<p><strong>Ways out: name and reference functions, use libraries like <a href="https://github.com/caolan/async">async</a>, <a href="https://www.npmjs.com/package/run-series">run-series</a>, <a href="https://www.npmjs.com/package/run-parallel">run-parallel</a> and modularize your stuff</strong></p>
</section>
  </div>
  <div class="slide hidden" id="slide-3">
    <section class="slide-content"><h3 id="js-obstacles">js obstacles</h3>
<blockquote>
<p>Prototypal Inheritance</p>
</blockquote>
<pre><code class="lang-js"><span class="hljs-comment">// constructor function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Hello</span> (<span class="hljs-params">announcement</span>) </span>{
    <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> Hello)) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Hello(announcement);
    <span class="hljs-keyword">this</span>.announcement = announcement;
}

<span class="hljs-comment">// method</span>
Hello.prototype.world = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.announcement, <span class="hljs-string">'hello world'</span>);
};

<span class="hljs-comment">// instantiating an object</span>
<span class="hljs-keyword">var</span> hello = Hello(); <span class="hljs-comment">// or new Hello();</span>
hello.world(); <span class="hljs-comment">// prints out: hello world</span>

<span class="hljs-comment">// method added (on the fly)</span>
Hello.prototype.ch = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.announcement, <span class="hljs-string">'sali duu'</span>);
};
hello.ch(); <span class="hljs-comment">// prints out: sali duu</span></code></pre>
</section>
  </div>
  <div class="slide hidden" id="slide-4">
    <section class="slide-content"><h3 id="js-obstacles">js obstacles</h3>
<blockquote>
<p>problem with <code>this</code></p>
</blockquote>
<pre><code class="lang-js"><span class="hljs-comment">// constructor function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Hello</span> (<span class="hljs-params">announcement</span>) </span>{
    <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> Hello)) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Hello(announcement);
    <span class="hljs-keyword">this</span>.announcement = announcement;
}
<span class="hljs-comment">// wrong method</span>
Hello.prototype.world = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-comment">// !!! this is `undefined` in the inner function</span>
        <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.announcement, <span class="hljs-string">'hello world'</span>);
    }, <span class="hljs-number">1000</span>);
};
<span class="hljs-comment">// correct method</span>
Hello.prototype.world = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// save `this` to use in inner function</span>
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-comment">// works as expected</span>
        <span class="hljs-built_in">console</span>.log(self.announcement, <span class="hljs-string">'hello world'</span>);
    }, <span class="hljs-number">1000</span>);
};
Hello(<span class="hljs-string">'I SAY:'</span>).world();</code></pre>
</section>
  </div>
  <div class="slide hidden" id="slide-5">
    <section class="slide-content"><h3 id="js-obstacles">js obstacles</h3>
<blockquote>
<p>Grasp Functional Beauty</p>
</blockquote>
<pre><code class="lang-js">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">repeater</span> (<span class="hljs-params">who, what</span>) </span>{
  <span class="hljs-keyword">var</span> text = <span class="hljs-string">'said'</span>;
  <span class="hljs-comment">// returning the inner function creates a closure at run time</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">repeat</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(who, text, what);
  }
}

<span class="hljs-keyword">var</span> i = repeater(<span class="hljs-string">'I'</span>,<span class="hljs-string">'hello'</span>);
<span class="hljs-keyword">var</span> you = repeater(<span class="hljs-string">'you'</span>,<span class="hljs-string">'world'</span>);

i();  <span class="hljs-comment">// I said hello</span>
you(); <span class="hljs-comment">// you said world</span>

repeater(<span class="hljs-string">'everyone'</span>, <span class="hljs-string">'yay!'</span>)();  <span class="hljs-comment">//everyone said yay!</span></code></pre>
</section>
  </div>
  <div class="slide hidden" id="slide-6">
    <section class="slide-content"><h3 id="js-obstacles">js obstacles</h3>
<blockquote>
<p>problem with <code>for</code> loop</p>
</blockquote>
<pre><code class="lang-js">
<span class="hljs-comment">// works as expected</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'i'</span>, i);
  <span class="hljs-comment">//0 1 2  ... 9</span>
} <span class="hljs-comment">// **only use for loop for synchronous actions**</span>

<span class="hljs-comment">// hmmm not really what we wanted</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
  setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)</span>{<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'i'</span>, i)}, <span class="hljs-number">100</span>);
  <span class="hljs-comment">//10 10 10  ... 10</span>
} <span class="hljs-comment">// **don't use for loop for asynchronous actions**</span></code></pre>
</section>
  </div>
  <div class="slide hidden" id="slide-7">
    <section class="slide-content"><h3 id="js-obstacles">js obstacles</h3>
<blockquote>
<p>solutions to <code>for</code> loop problems</p>
</blockquote>
<pre><code class="lang-js"><span class="hljs-comment">// Array.forEach function</span>
<span class="hljs-keyword">var</span> arr = [];
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
  arr.push(i);
}
arr.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i</span>)</span>{
  setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)</span>{<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'i'</span>, i)}, <span class="hljs-number">100</span>);
  <span class="hljs-comment">//0 1 2  ... 9</span>
});  <span class="hljs-comment">// **Array.forEach works well for asynchronous actions**</span>

<span class="hljs-comment">// anonymous immediately invoked function</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
  (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i</span>)</span>{
    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)</span>{<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'i'</span>, i)}, <span class="hljs-number">100</span>);
    <span class="hljs-comment">//0 1 2  ... 9</span>
  })(i);
}</code></pre>
</section>
  </div>
  <div class="slide hidden" id="slide-8">
    <section class="slide-content"><h3 id="js-obstacles">js obstacles</h3>
<blockquote>
<p>Variable Hoisting</p>
</blockquote>
<p><em>Variables can be used, before they were declared. Variable declarations (not initialization) are moved to the top of the function or global scope (hoisted). It is therefore recommended to declare the variables at the top of the function or global scope</em></p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> myvar = <span class="hljs-string">'hello outer'</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myfunction</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(myvar); <span class="hljs-comment">// undefined</span>
  <span class="hljs-keyword">var</span> myvar = <span class="hljs-string">'hello inner'</span>;
}
myfunction();</code></pre>
<p><em>myfunction above is equivalent to this:</em></p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myfunction</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> myvar; <span class="hljs-comment">// declaration</span>
  <span class="hljs-built_in">console</span>.log(myvar); <span class="hljs-comment">// undefined</span>
  myvar = <span class="hljs-string">'hello inner'</span>; <span class="hljs-comment">// initializations</span>
}</code></pre>
</section>
  </div>
  <div class="slide hidden" id="slide-9">
    <section class="slide-content"><h3 id="js-obstacles">js obstacles</h3>
<blockquote>
<p>Function Hoisting</p>
</blockquote>
<p><em>Function definitions are also hoisted, Function declarations <code>var myfunc = function(){}</code> are NOT hoisted.</em></p>
<pre><code class="lang-js">hoisted(); <span class="hljs-comment">// works</span>
notHoisted(); <span class="hljs-comment">// TypeError: notHoisted is not a function</span>
noHoist(); <span class="hljs-comment">// ReferenceError: noHoist is not defined</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hoisted</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'hoisted'</span>);
}

<span class="hljs-keyword">var</span> notHoisted = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">noHoist</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'notHoisted'</span>);
}</code></pre>
</section>
  </div>
  <div class="slide hidden" id="slide-10">
    <section class="slide-content"><h3 id="js-obstacles">js obstacles</h3>
<blockquote>
<p>NO Block Scope</p>
</blockquote>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> x = <span class="hljs-string">'hallo'</span>;
<span class="hljs-built_in">console</span>.log(x); <span class="hljs-comment">// 'hallo'</span>
<span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) { <span class="hljs-comment">// block</span>
    <span class="hljs-keyword">var</span> x = <span class="hljs-string">'welt'</span>; <span class="hljs-comment">// overwrites var x outside block</span>
    <span class="hljs-built_in">console</span>.log(x); <span class="hljs-comment">// 'welt'</span>
}
<span class="hljs-built_in">console</span>.log(x); <span class="hljs-comment">// 'welt'</span></code></pre>
</section>
  </div>
  <div class="slide hidden" id="slide-11">
    <section class="slide-content"><h3 id="js-obstacles">js obstacles</h3>
<blockquote>
<p>but Function Scope</p>
</blockquote>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> x = <span class="hljs-string">'hallo'</span>;
<span class="hljs-built_in">console</span>.log(x); <span class="hljs-comment">// 'hallo'</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">welt</span> (<span class="hljs-params"></span>) </span>{ <span class="hljs-comment">// function scope</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) {
      <span class="hljs-keyword">var</span> x = <span class="hljs-string">'welt'</span>; <span class="hljs-comment">// own declaration of x inside function</span>
      <span class="hljs-built_in">console</span>.log(x); <span class="hljs-comment">// 'welt'</span>
  }
}
welt();
<span class="hljs-built_in">console</span>.log(x); <span class="hljs-comment">// 'hallo'</span></code></pre>
<p><strong>JavaScript has function scope (no block scope)</strong></p>
</section>
  </div>
  <div class="slide hidden" id="slide-12">
    <section class="slide-content"><h3 id="js-obstacles">js obstacles</h3>
<blockquote>
<p>Function Scope, same in green</p>
</blockquote>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> x = <span class="hljs-string">'hallo'</span>;
<span class="hljs-built_in">console</span>.log(x); <span class="hljs-comment">// 'hallo'</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{ <span class="hljs-comment">// function scope</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) {
      <span class="hljs-keyword">var</span> x = <span class="hljs-string">'welt'</span>; <span class="hljs-comment">// own declaration of x inside function</span>
      <span class="hljs-built_in">console</span>.log(x); <span class="hljs-comment">// 'welt'</span>
  }
})();

<span class="hljs-built_in">console</span>.log(x); <span class="hljs-comment">// 'hallo'</span></code></pre>
</section>
  </div>
  <div class="slide hidden" id="slide-13">
    <section class="slide-content"><h3 id="js-obstacles">js obstacles</h3>
<blockquote>
<p>Immediately-Invoked Function Expression</p>
</blockquote>
<pre><code class="lang-js"><span class="hljs-comment">// functions can be declared in brackets (function(){})</span>
<span class="hljs-comment">// and be Immediately-Invoked with following function call ()</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'hallo welt'</span>);
})();

<span class="hljs-comment">// this can be used to get function scope and alias names</span>
<span class="hljs-comment">// often used with jQuery</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">$</span>) </span>{
  <span class="hljs-built_in">console</span>.log($(<span class="hljs-string">'body'</span>));
}(jQuery));</code></pre>
</section>
  </div>
  <div class="slide hidden" id="slide-14">
    <section class="slide-content"><h3 id="js-obstacles">js obstacles</h3>
<blockquote>
<p>NO Dynamic Scope in JavaScript</p>
</blockquote>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">repeat</span> (<span class="hljs-params">who, what</span>) </span>{
  <span class="hljs-keyword">var</span> text = <span class="hljs-string">'said'</span>;
  repeater(who, what);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">repeater</span>(<span class="hljs-params">who, what</span>) </span>{
  <span class="hljs-built_in">console</span>.log(who, text, what); <span class="hljs-comment">// ReferenceError: text is not defined</span>
}
<span class="hljs-comment">// the repeater function wasn't defined inside the</span>
<span class="hljs-comment">// caller function that has the text variable defined.</span>
repeat(<span class="hljs-string">'I'</span>, <span class="hljs-string">', hey YOU!'</span>);</code></pre>
<p><strong>JavaScript does not support dynamic scope, where the variable resolution happens in the scope where the function is called at run time.</strong></p>
</section>
  </div>
  <div class="slide hidden" id="slide-15">
    <section class="slide-content"><h3 id="js-obstacles">js obstacles</h3>
<blockquote>
<p>Lexical Scope</p>
</blockquote>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">whoSaysWhat</span> (<span class="hljs-params">who, what</span>) </span>{
  <span class="hljs-keyword">var</span> text = <span class="hljs-string">'says'</span>;
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">say</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-comment">// inner function can access the outer scope</span>
    <span class="hljs-built_in">console</span>.log(who, text, what); <span class="hljs-comment">// text is declared in parent function</span>
  }
  say();
}
whoSaysWhat(<span class="hljs-string">'elephant'</span>, <span class="hljs-string">'trörööö'</span>);  <span class="hljs-comment">// elephant says trörööö</span></code></pre>
<p><strong>The scope of a variable is statically defined by its location in the source code (not dynamically at run time). This is called lexical scope.</strong></p>
<p><em>Note: inner functions can access variables from outer functions.</em></p>
</section>
  </div>
  <div class="slide hidden" id="slide-16">
    <section class="slide-content"><h3 id="js-obstacles">js obstacles</h3>
<blockquote>
<p>Closures</p>
</blockquote>
<p><em>&quot;Closures are functions that refer to independent (free) variables. In other words, the function defined in the closure &#39;remembers&#39; the environment in which it was created.&quot; <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Closures">quote from mozilla</a></em></p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">repeater</span> (<span class="hljs-params">who, what</span>) </span>{
  <span class="hljs-keyword">var</span> text = <span class="hljs-string">'said'</span>;
  <span class="hljs-comment">// inner function is returned and creates a creates closure</span>
  <span class="hljs-comment">// where the returned function has access to the outer scope</span>
  <span class="hljs-comment">// it was defined in, even after the outer function has terminated.</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">repeat</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log(who, text, what);
  }
}
repeater(<span class="hljs-string">'everyone'</span>, <span class="hljs-string">'yay!'</span>)();  <span class="hljs-comment">//everyone said yay!</span></code></pre>
</section>
  </div>
  <div class="slide hidden" id="slide-17">
    <section class="slide-content"><h3 id="js-obstacles">js obstacles</h3>
<blockquote>
<p>different JavaScript / ECMAScript / node.js Versions</p>
</blockquote>
<ul>
<li>ES5 :: <strong>node.js</strong> &lt;= 0.x :: <a href="http://caniuse.com/#search=es5"><strong>browser</strong> caniuse +</a></li>
<li>ES6 (ECMAScript 2015) :: <strong>io.js, node.js</strong> &gt; 0.x :: <a href="http://caniuse.com/#search=es6"><strong>browser</strong> caniuse ~</a></li>
</ul>
<p><strong>node.js releases</strong></p>
<ul>
<li>LTS: long term support (even numbers)<ul>
<li>current release (Nov 2016): V6 &quot;Boron&quot;</li>
<li>actively maintained for 18 month, maintenance mode afterwards</li>
<li>no more than two LTS versions at the same time</li>
</ul>
</li>
<li>Stable: shorter lifespan, more updates (odd numbers)<ul>
<li>current release (Nov 2016): V7</li>
<li>when Stable release becomes the next LTS, no new features or breaking changes are added</li>
</ul>
</li>
</ul>
</section>
  </div>
  <div class="slide hidden" id="slide-18">
    <section class="slide-content"><h3 id="js-obstacles">js obstacles</h3>
<blockquote>
<ul>
<li>The JavaScript universe is changing very fast ....</li>
<li>Many tools/frameworks to pick from</li>
<li><strong>It&#39;s hard to choose the <em>right</em> Tool</strong> for the job</li>
</ul>
</blockquote>
</section>
  </div>
  <div class="slide hidden" id="slide-19">
    <section class="slide-content"><h3 id="js-obstacles-with-es6">js obstacles with ES6</h3>
<blockquote>
<p>Variable Hoisting</p>
</blockquote>
<p><em><code>let</code> variables are <strong>NOT</strong> hoisted</em></p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> foo = <span class="hljs-string">'bar'</span>;
foo = <span class="hljs-string">'milkbar'</span>; <span class="hljs-comment">// perfectly fine</span>

bar = <span class="hljs-string">'milkbar'</span>; <span class="hljs-comment">// error: not defined</span>
<span class="hljs-keyword">typeof</span> bar <span class="hljs-comment">// IMPORTANT: typeof undefined `let` throws an error too!</span>
<span class="hljs-keyword">let</span> bar = <span class="hljs-string">''</span>;</code></pre>
</section>
  </div>
  <div class="slide hidden" id="slide-20">
    <section class="slide-content"><h3 id="js-obstacles-with-es6">js obstacles with ES6</h3>
<blockquote>
<p>Variable Hoisting</p>
</blockquote>
<p><em><code>const</code> and <code>let</code> variables are not hoisted</em></p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">c</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">typeof</span> foo; <span class="hljs-comment">// ReferenceError: foo is not defined</span>
  <span class="hljs-keyword">const</span> foo = <span class="hljs-string">'bar'</span>;
}
c();

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">l</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">typeof</span> foo; <span class="hljs-comment">// ReferenceError: foo is not defined</span>
  <span class="hljs-keyword">let</span> foo = <span class="hljs-string">'bar'</span>;
}
l();

<span class="hljs-keyword">typeof</span> foo; <span class="hljs-comment">// 'undefined'</span></code></pre>
</section>
  </div>
  <div class="slide hidden" id="slide-21">
    <section class="slide-content"><h3 id="js-obstacles-with-es6">js obstacles with ES6</h3>
<blockquote>
<p>Variable Scope</p>
</blockquote>
<p><em>inner functions/blocks can access <code>var</code>, <code>let</code> and <code>const</code> variables from outer scope/block</em></p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myfunction</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(myvar); <span class="hljs-comment">// -&gt; 'hello var'</span>
  <span class="hljs-built_in">console</span>.log(mylet); <span class="hljs-comment">// -&gt; 'hello let'</span>
  <span class="hljs-built_in">console</span>.log(myconst); <span class="hljs-comment">// -&gt; 'HELLO_CONST'</span>
}
<span class="hljs-keyword">var</span> myvar = <span class="hljs-string">'hello var'</span>
<span class="hljs-keyword">let</span> mylet = <span class="hljs-string">'hello let'</span>;
<span class="hljs-keyword">const</span> myconst = <span class="hljs-string">'HELLO_CONST'</span>;
<span class="hljs-keyword">if</span> (mylet &amp;&amp; myconst) {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'mylet:'</span>, mylet, <span class="hljs-string">'myconst:'</span>, myconst); <span class="hljs-comment">// -&gt; mylet: hello let myconst: HELLO_CONST</span>
}
myfunction();</code></pre>
</section>
  </div>
  <div class="slide hidden" id="slide-22">
    <section class="slide-content"><h3 id="js-obstacles-with-es6">js obstacles with ES6</h3>
<blockquote>
<p>Variable Scope</p>
</blockquote>
<p><em><code>let</code> and <code>const</code> are not accessable outside of the block they were defined in</em></p>
<pre><code class="lang-js"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
  <span class="hljs-keyword">var</span> myvar = i;
  <span class="hljs-keyword">let</span> mylet = i;
  <span class="hljs-keyword">if</span> (!i) {
    <span class="hljs-keyword">const</span> myconst = i;
  }
  <span class="hljs-built_in">console</span>.log(myconst); <span class="hljs-comment">// ReferenceError: myconst is not defined in this block scope</span>
}
<span class="hljs-built_in">console</span>.log(myvar); <span class="hljs-comment">// -&gt; 2</span>
<span class="hljs-built_in">console</span>.log(mylet); <span class="hljs-comment">// ReferenceError: mylet is not defined in this scope</span>
<span class="hljs-built_in">console</span>.log(myconst); <span class="hljs-comment">// ReferenceError: myconst is not defined in this scope</span></code></pre>
</section>
  </div>
  <div class="slide hidden" id="slide-23">
    <section class="slide-content"><h3 id="js-obstacles-with-es6">js obstacles with ES6</h3>
<blockquote>
<p>problem with <code>for</code> loop</p>
</blockquote>
<pre><code class="lang-js"><span class="hljs-comment">// hmmm not really what we wanted</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
  setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)</span>{<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'i'</span>, i)}, <span class="hljs-number">100</span>);
  <span class="hljs-comment">//10 10 10  ... 10</span>
} <span class="hljs-comment">// **don't use for loop for asynchronous actions**</span></code></pre>
<p>you can now easily fix this with <code>let</code> with ES6</p>
<pre><code class="lang-js"><span class="hljs-comment">// you can fix this with `let`</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
  setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)</span>{<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'i'</span>, i)}, <span class="hljs-number">100</span>);
  <span class="hljs-comment">//0 1 2  ... 9</span>
}</code></pre>
</section>
  </div>
  <div class="slide hidden" id="slide-24">
    <section class="slide-content"><h3 id="js-obstacles-with-es6">js obstacles with ES6</h3>
<blockquote>
<p>Arrow Function and <code>this</code> </p>
</blockquote>
<p><em>an arrow function does not create its own <code>this</code> context</em></p>
<p>*in most cases, this is helpful and we can get rid of <code>var self = this</code></p>
<p><em>however arrow functions cannot be used with apis that create their own <code>this</code> context.</em></p>
<pre><code class="lang-js"><span class="hljs-built_in">document</span>.body.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> HTMLBodyElement); <span class="hljs-comment">// true</span>
});</code></pre>
<pre><code class="lang-js"><span class="hljs-built_in">document</span>.body.addEventListener(<span class="hljs-string">'click'</span>, (e) =&gt; <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> HTMLBodyElement)); <span class="hljs-comment">// false -&gt; window object</span></code></pre>
</section>
  </div>
  <div class="slide hidden" id="slide-25">
    <section class="slide-content"><h3 id="js-obstacles-with-es6">js obstacles with ES6</h3>
<blockquote>
<p><code>class</code> objects can&#39;t be instantiated without the <code>new</code> keyword</p>
</blockquote>
<p><em>this breaks with what is possible in ES5</em></p>
<p>API with a constructor function:</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Greeter</span> (<span class="hljs-params">greeter</span>) </span>{
  <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> Greeter)) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Greeter(greeter);
  <span class="hljs-keyword">this</span>.greeter = greeter;
}
Greeter.prototype.greet = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">greet</span>(<span class="hljs-params">person</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.greeter + <span class="hljs-string">' greets '</span> + person);
}
Greeter(<span class="hljs-string">'Tom'</span>).greet(<span class="hljs-string">'Jerry'</span>); <span class="hljs-comment">// -&gt; Tom greets Jerry</span></code></pre>
</section>
  </div>
  <div class="slide hidden" id="slide-26">
    <section class="slide-content"><h3 id="js-obstacles-with-es6">js obstacles with ES6</h3>
<blockquote>
<p><code>class</code> objects can&#39;t be instantiated without the <code>new</code> keyword</p>
</blockquote>
<p><em>this breaks with what is possible in ES5</em></p>
<p>same API as with a closure:</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Greeter</span>(<span class="hljs-params">greeter</span>) </span>{
  <span class="hljs-keyword">return</span> {
    greet: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">greet</span>(<span class="hljs-params">person</span>) </span>{
      <span class="hljs-built_in">console</span>.log(greeter + <span class="hljs-string">' greets '</span> + person);
    }
  }
}
Greeter(<span class="hljs-string">'Tom'</span>).greet(<span class="hljs-string">'Jerry'</span>); <span class="hljs-comment">// -&gt; Tom greets Jerry</span></code></pre>
</section>
  </div>
  <div class="slide hidden" id="slide-27">
    <section class="slide-content"><h3 id="js-obstacles-with-es6">js obstacles with ES6</h3>
<blockquote>
<p><code>class</code> objects can&#39;t be instantiated without the <code>new</code> keyword</p>
</blockquote>
<p><em>this breaks with what is possible in ES5</em></p>
<p>with <code>class</code> the API breaks! <code>new</code> is required.</p>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Greeter</span> </span>{
  <span class="hljs-keyword">constructor</span>(greeter) {
    <span class="hljs-keyword">this</span>.greeter = greeter;
  }
  greet(person) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>.greeter + <span class="hljs-string">' greets '</span> + person);
  }
}
<span class="hljs-keyword">new</span> Greeter(<span class="hljs-string">'Tom'</span>).greet(<span class="hljs-string">'Jerry'</span>); <span class="hljs-comment">// -&gt; Tom greets Jerry</span>
Greeter(<span class="hljs-string">'Tom'</span>).greet(<span class="hljs-string">'Jerry'</span>); <span class="hljs-comment">// TypeError: Class constructor Greeter cannot be invoked without 'new'</span></code></pre>
</section>
  </div>
  <div class="slide hidden author-slide" id="slide-28">
    <section class="slide-content"><div class="author">
  <h1 class="name">Andi Neck</h1>
    <h3 class="twitter">
      <a href="http://twitter.com/@andineck">@andineck</a>
    </h3>
    <h3 class="url">
      <a href="http://intesso.com">http://intesso.com</a>
    </h3>
</div>
</section>
  </div>

  <div class="controls">
    <div class="arrow prev"></div>
    <div class="arrow next"></div>
  </div>


  <script type="text/javascript">
    /**
 * Returns the current page number of the presentation.
 */
function currentPosition() {
  return parseInt(document.querySelector('.slide:not(.hidden)').id.slice(6));
}


/**
 * Navigates forward n pages
 * If n is negative, we will navigate in reverse
 */
function navigate(n) {
  var position = currentPosition();
  var numSlides = document.getElementsByClassName('slide').length;

  /* Positions are 1-indexed, so we need to add and subtract 1 */
  var nextPosition = (position - 1 + n) % numSlides + 1;

  /* Normalize nextPosition in-case of a negative modulo result */
  nextPosition = (nextPosition - 1 + numSlides) % numSlides + 1;

  document.getElementById('slide-' + position).classList.add('hidden');
  document.getElementById('slide-' + nextPosition).classList.remove('hidden');

  updateProgress();
  updateURL();
  updateTabIndex();
}


/**
 * Updates the current URL to include a hashtag of the current page number.
 */
function updateURL() {
  try {
    window.history.replaceState({} , null, '#' + currentPosition());
  } catch (e) {
    window.location.hash = currentPosition();
  }
}


/**
 * Sets the progress indicator.
 */
function updateProgress() {
  var progressBar = document.querySelector('.progress-bar');

  if (progressBar !== null) {
    var numSlides = document.getElementsByClassName('slide').length;
    var position = currentPosition() - 1;
    var percent = (numSlides === 1) ? 100 : 100 * position / (numSlides - 1);
    progressBar.style.width = percent.toString() + '%';
  }
}


/**
 * Removes tabindex property from all links on the current slide, sets
 * tabindex = -1 for all links on other slides. Prevents slides from appearing
 * out of control.
 */
function updateTabIndex() {
  var allLinks = document.querySelectorAll('.slide a');
  var position = currentPosition();
  var currentPageLinks = document.getElementById('slide-' + position).querySelectorAll('a');
  var i;

  for (i = 0; i < allLinks.length; i++) {
    allLinks[i].setAttribute('tabindex', -1);
  }

  for (i = 0; i < currentPageLinks.length; i++) {
    currentPageLinks[i].removeAttribute('tabindex');
  }
}

/**
 * Determines whether or not we are currently in full screen mode
 */
function isFullScreen() {
  return document.fullscreenElement ||
         document.mozFullScreenElement ||
         document.webkitFullscreenElement ||
         document.msFullscreenElement;
}

/**
 * Toggle fullScreen mode on document element.
 * Works on chrome (>= 15), firefox (>= 9), ie (>= 11), opera(>= 12.1), safari (>= 5).
 */
function toggleFullScreen() {
  /* Convenient renames */
  var docElem = document.documentElement;
  var doc = document;

  docElem.requestFullscreen =
      docElem.requestFullscreen ||
      docElem.msRequestFullscreen ||
      docElem.mozRequestFullScreen ||
      docElem.webkitRequestFullscreen.bind(docElem, Element.ALLOW_KEYBOARD_INPUT);

  doc.exitFullscreen =
      doc.exitFullscreen ||
      doc.msExitFullscreen ||
      doc.mozCancelFullScreen ||
      doc.webkitExitFullscreen;

  isFullScreen() ? doc.exitFullscreen() : docElem.requestFullscreen();
}

document.addEventListener('DOMContentLoaded', function () {
  // Update the tabindex to prevent weird slide transitioning
  updateTabIndex();

  // If the location hash specifies a page number, go to it.
  var page = window.location.hash.slice(1);
  if (page) {
    navigate(parseInt(page) - 1);
  }

  document.onkeydown = function (e) {
    var kc = e.keyCode;

    // left, down, H, J, backspace, PgUp - BACK
    // up, right, K, L, space, PgDn - FORWARD
    // enter - FULLSCREEN
    if (kc === 37 || kc === 40 || kc === 8 || kc === 72 || kc === 74 || kc === 33) {
      navigate(-1);
    } else if (kc === 38 || kc === 39 || kc === 32 || kc === 75 || kc === 76 || kc === 34) {
      navigate(1);
    } else if (kc === 13) {
      toggleFullScreen();
    }
  };

  if (document.querySelector('.next') && document.querySelector('.prev')) {
    document.querySelector('.next').onclick = function (e) {
      e.preventDefault();
      navigate(1);
    };

    document.querySelector('.prev').onclick = function (e) {
      e.preventDefault();
      navigate(-1);
    };
  }
});


  </script>
</body>
</html>
